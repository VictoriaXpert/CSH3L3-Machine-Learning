"use strict";YUI.add("rg-header-notify",function(a){a.namespace("rg.widget"),a.rg.notify=function(b,c){return a.fire("emitLegacyNotification",b,c)},a.rg.flushAlerts=function(){return a.fire("flushLegacyNotifications")}},"0.0.1",{requires:[]});
"use strict";YUI.add("rg.views.keywords.AbstractKeywordContainerView",function(a){a.namespace("rg.views.keywords"),a.rg.views.keywords.AbstractKeywordContainerView=a.Base.create("keywords.AbstractKeywordContainerView",a.rg.WidgetView,[],{afterRendered:function(){var b=this.getChild("editor"),c=this.getChild("list");c.on("keywordAdded",function(a){this._onKeywordCountChange(),this.fire("keywordAdded",a)},this),c.on("keywordRemoved",function(b){this._onKeywordCountChange(),this.fire("keywordRemoved",b),a.rg.ajaxDbwAware(this.data.endpoint,{keywordId:b.keyword.data.id},null,this,null,"DELETE")},this),c.on("allKeywordsRemoved",function(a){this.fire("allKeywordsRemoved",a)},this),b&&(c.on("keywordAdded",function(a){b.addExcludedKeyword(a.keyword)},this),c.on("keywordRemoved",function(a){b.removeExcludedKeyword(a.keyword)},this),b.on("keywordSelected",function(a){this.addKeyword(a.keywordData)},this),a.Array.each(c.getKeywords(),function(a){b.addExcludedKeyword(a)}),this._attachCloseHandling(),b.on("input:changed",function(a){this.fire("editor:input:changed",a)},this))},_attachCloseHandling:function(){if(!this.data.stayOpen){var a=this.get("container"),b=this.getChild("editor"),c=function(){b.closeEditorInput()};b.get("isOpen")&&a.once("clickoutside",c,this),b.on("input:focus",function(){a.once("clickoutside",c,this)})}},removeKeyword:function(a,b){this.getChild("list").removeKeyword(a,b)},addKeyword:function(b,c){if(this.checkLimit()){var d={keywordName:b.name,disableTooltip:this.data.disableTooltip,disableUrl:this.data.disableUrl,added:[]};this.data.keywordClickedSessionEvent&&(d.keywordClickedSessionEvent=this.data.keywordClickedSessionEvent),b.id&&(d.keywordId=b.id),a.Array.each(this.getChild("list").getKeywords(),function(a){d.added.push(a.data.id)}),a.rg.ajaxDbwAware(this.data.endpoint,d,function(b){if(b.success)this.getChild("list").addKeyword(b.result,c);else{var d=!1,e="";b.exception?(d=!0,e="An error occurred."):b.errors.length>=1&&(d=!0,e=b.errors[0]),d&&""!==this.get("addKeywordErrorMsg")&&(e=this.get("addKeywordErrorMsg")),d&&a.rg.notify(e,"warning")}},this,null,"POST")}},addKeywordWidget:function(a){this.getChild("list").addKeyword(a)},_updateKeywordsRemoveButtonVisibility:function(b,c){a.Array.each(b,function(a){a.isRemoveButtonVisible(c)})},_onKeywordCountChange:function(){if(this.data.minLimit&&this.data.canModify){var a=this.getChild("list"),b=a.getKeywords();this.data.isLowerThanOrEqualMinLimit?b.length>this.data.minLimit&&(this._updateKeywordsRemoveButtonVisibility(b,!0),this.data.isLowerThanOrEqualMinLimit=!1):b.length<=this.data.minLimit&&(this._updateKeywordsRemoveButtonVisibility(b,!1),this.data.isLowerThanOrEqualMinLimit=!0)}},checkLimit:function(){return!(this.data.limit&&this.getChild("list").getKeywords().length>=this.data.limit)||(a.rg.notify("You can choose up to "+this.data.limit+" topic"+(1==this.data.limit?"":"s"),"warning"),!1)},getKeywords:function(){var a=this.getChild("list");return a.getKeywords?a.getKeywords():[]},getCurrentInput:function(){return this.getChild("editor").getInputValue()},focusEditorInput:function(){this.getChild("editor").focusInput()}},{ATTRS:{addKeywordErrorMsg:{value:""}}})},"1.0.0",{requires:["rg-header-notify"]});
"use strict";YUI.add("rg.views.keywords.KeywordListView",function(a){a.namespace("rg.views.keywords"),a.rg.views.keywords.KeywordListView=a.Base.create("keywords.KeywordListView",a.rg.WidgetView,[],{afterRendered:function(){a.Array.each(this.getChild("keywordItems"),function(a){this._setKeywordEvents(a)},this)},getKeywords:function(){return this.getChild("keywordItems")},_setKeywordEvents:function(a){a.on("remove",function(a){this.removeKeyword(a.widget)},this),a.on("click",function(a){this._onKeywordClicked(a.widget)},this)},removeKeyword:function(b,c,d){a.Lang.isUndefined(d)&&(d=!0),b.removeFromDOM(function(){this.removeChildById(b.id),d&&this.fire("keywordRemoved",{list:this,keyword:b,payload:c})},this)},addKeyword:function(b,c,d){var e=this;if(b&&b.data&&b.data.id){var f=!1;a.Array.each(this.getKeywords(),function(a){a.data.id==b.data.id&&(f=!0)}),f||(this.data.inputFieldName&&(b.data.inputFieldName=this.data.inputFieldName),widgetLoader.createWidget(b,function(b){var f={after:function(d){e.addChild("keywordItems",b),e._setKeywordEvents(b),e.fire("keywordAdded",{list:e,keyword:b,payload:c}),(0===a.UA.ie||a.UA.ie>8)&&(d.setStyle("boxShadow","0 0 5px 5px #fffed2"),d.transition({easing:"ease-out",duration:1.5,boxShadow:"0 0 5px 5px transparent"},function(){d.setStyle("boxShadow","")}))}};!0===d?f.prepend=e.get("container").one("ul"):f.append=e.get("container").one("ul"),b.render(f)}))}},clear:function(){var b=this;a.Array.each(this.getKeywords(),function(a){b.removeKeyword(a)})},clearAll:function(){var b=this;a.Array.each(this.getKeywords(),function(a){b.removeKeyword(a,{},!1)}),this.fire("allKeywordsRemoved")},_onKeywordClicked:function(a){this.fire("keywordClicked",{widget:a})}})},"1.0.0",{requires:["transition"]});
"use strict";YUI.add("rg.views.keywords.KeywordView",function(a){a.namespace("rg.views.keywords"),a.rg.views.keywords.KeywordView=a.Base.create("keywords.KeywordView",a.rg.WidgetView,[],{events:{".js-show-tooltip":{mouseenter:"showTooltip",mouseleave:"hideTooltip"},".js-remove":{click:"_onRemove"},".js-click":{click:"_click"},global:{"keywords.KeywordView:unfollow":"onKeywordFollowStateChange","keywords.KeywordView:follow":"onKeywordFollowStateChange"}},afterRendered:function(){if(this._container=this.get("container"),this._container&&(this._removeButton=this._container.one(".remove-action"),this.data.isTooltipEnabled))if(this._tooltip)this._tooltip.set("content",this._container.one(".keyword-tooltip").getContent()),this._tooltipVisible||this._tooltip.hide();else{var b=this._container.get("offsetWidth"),c={content:this._container.one(".keyword-tooltip").getContent(),type:"manual",align:"bottom",width:215,arrowOffset:[15-b/2,0],overlayOffset:[(215-b)/2,0],additionalClasses:"keyword-tooltip"};this._container.plug(a.rg.widget.TooltipPlugin,c),this._tooltip=this._container.tooltip,this._tooltip.innerContainer.on("mouseenter",this.showTooltip,this),this._tooltip.innerContainer.on("mouseleave",this.hideTooltip,this)}},_click:function(a){this.data.isApproved||a.preventDefault(),this.fire("click",{widget:this})},showTooltip:function(){this._setTooltipTimer(!0)},hideTooltip:function(){this._setTooltipTimer(!1)},_setTooltipTimer:function(b){this._tooltipVisible=b,!this._timer&&this._tooltip&&(this._timer=a.later(200,this,function(){if(this.get("container")&&this._tooltip)if(this._tooltipVisible){var a=this._tooltip.get("overlay")&&this._tooltip.get("overlay").get("visible");a||this._tooltip.show();var b=this._tooltip.innerContainer,c=b.one(".unfollow-action"),d=b.one(".follow-action");c&&(c.on("click",this.unfollow,this),c.on("mouseenter",this.onEnterUnfollow,this),c.on("mouseleave",this.onLeave,this)),d&&(d.on("click",this.follow,this),d.on("mouseenter",this.onEnterFollow,this),d.on("mouseleave",this.onLeave,this))}else this._tooltip.hide();this._timer=null}))},follow:function(a){a.preventDefault(),a.currentTarget.addClass("btn-disabled"),this._sendRequest("follow")},unfollow:function(a){a.currentTarget.addClass("btn-disabled"),this._sendRequest("unfollow")},onEnterFollow:function(a){a.currentTarget.removeClass("btn-default"),a.currentTarget.addClass("btn-promote")},onEnterUnfollow:function(a){a.currentTarget.removeClass("btn-default"),a.currentTarget.addClass("btn-attention")},onKeywordFollowStateChange:function(a){var b=a.widget;b.id!=this.id&&b.data.id==this.data.id&&!this.removed&&this.get("container")&&(this.data.followerCount=b.data.followerCount,this.data.isFollowing=b.data.isFollowing,this.data.followerCountFormatted=b.data.followerCountFormatted,this.data.isFollowingFormatted=b.data.isFollowingFormatted,this.render({refresh:!0}))},onLeave:function(a){a.currentTarget.removeClass("btn-attention"),a.currentTarget.removeClass("btn-promote"),a.currentTarget.addClass("btn-default")},isRemoveButtonVisible:function(a){return this._removeButton?a?this._removeButton.show():this._removeButton.hide():null},_sendRequest:function(b){var c=this,d=this.get("experimentGoal"),e={keywordId:this.data.id,canDelete:this.data.canDelete,disableTooltip:this.data.disableTooltip};d&&(e.experimentGoal=d),a.rg.ajax("keywords.Keyword."+b+".html?dbw=true",e,function(d){if(!d.success)return void a.rg.notify("An error occurred","warning");this.updateData(d.result.data),this.render({refresh:!0,after:function(){c.fire(b,{widget:c})}})},this,null,"POST")},removeFromDOM:function(a,b){this.removed=!0;var c=this.get("container");c&&c.remove(!0),a&&a.call(b)},_onRemove:function(){this.fire("remove",{widget:this})}},{ATTRS:{experimentGoal:{}}})},"1.0.0",{requires:["yui-later","rg-header-notify"]});
"use strict";YUI.add("rg.views.publictopics.PublicTopicPostDetailsRightColumnView",function(a){a.namespace("rg.views.publictopics"),a.rg.views.publictopics.PublicTopicPostDetailsRightColumnView=a.Base.create("publictopics.PublicTopicPostDetailsRightColumnView",a.rg.WidgetView,[],{events:{".js-answer":{click:"_onAnswerClicked"}},_onAnswerClicked:function(){this.data.isLoggedIn&&a.rg.ajax(this.data.interactionUrl,{type:"clickedAnswerButton"},function(){},this,null,"POST"),a.fire("TopicPostCommentEditor:obtainFocus")}})},"1.0.0");
